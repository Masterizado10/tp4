import pickle
import os.path
import Clase_ticket


def validar_numero(inf):
    min = inf

    while min <= inf and len(str(min)) <= 10:
        min = int(input("Ingrese numero de Ticket  mayor a cero!!:"))
    return min


def validate_type(mn=0, mx=2):
    print()
    vehiculo = int(input("Ingrese un dígito entre 0 y 2 que indica el tipo de vehículo (0: motocicleta, 1: automóvil, 2: camión)"))
    while vehiculo < mn or vehiculo > mx:
        vehiculo = int(input("No olvide que el vehículo DEBE ser entre 0 y 2"))
    return vehiculo


def validate_type_pago(mn=1, mx=2):
    print()
    pago = int(input("Ingrese un dígito 1 o 2 que indica la forma de pago (1: manual, 2 telepeaje)."))
    while pago< mn or pago > mx:
        pago = int(input("No olvide que el pago DEBE ser entre (1: manual, 2 telepeaje)"))
    return pago


def validate_type_cabina(mn=0, mx=4):
    print()
    cabina = int(input("Ingrese un dígito entre 0 y 4 que indica el país donde está la cabina que hizo el cobro (0: Argentina - 1: Bolivia - 2: Brasil - 3: Paraguay - 4: Uruguay).  "))
    while cabina < mn or cabina > mx:
        cabina = int(input("No olvide que la cabina DEBE ser un numero entre (0: Argentina - 1: Bolivia - 2: Brasil - 3: Paraguay - 4: Uruguay)"))
    return cabina


def validar_patente():
    print()
    patente1 = input("Ingrese patente: ").upper()

    while patente1.isalnum()==False:
        patente1 = input("Solo caracteres alfanuméricos!!").upper()
    """
    while len(patente1) > 7:
        patente1=input("ingrese patente de hasta 7 caracteres: ")
   print(len(patente1))
    """
    if len(patente1) < 7:
        total_espacios = 7-len(patente1)
        patente1 = total_espacios*" "+str(patente1)

    return str(patente1)


def validar_km(inf):
    km = inf

    while km <= inf:
        print()
        km = int(input("Ingrese cantidad de km recorridos mayor a cero:"))
        if km <= inf:
            print("Recuerde que la cantidad de km debe ser positiva")
    return km


def crear_archivo():
    global FD
    print('Grabando todos los datos en el archivo ...')
    m = open("peajes-tp4.csv", 'r')
    peaje= m.read()


    m.close()

    oficial = open('peaje75.txt',"wb")
    pickle.dump(peaje,oficial)

    print('... hecho')
    print()




def cargar_datos():
    v = []
    ticket = int(validar_numero(0))
    patente = validar_patente()
    vehiculo = validate_type()
    forma_de_pago = validate_type_pago()
    cabina = validate_type_cabina()
    km = int(validar_km(0))

    v.append(Clase_ticket.Ticket(ticket, patente, vehiculo, forma_de_pago, cabina, km))

    return v

def crear(v):
    global FD
    if len(v) == 0:
        print('No hay datos cargados...')
        print()
        return
    print('Grabando todos los datos en el archivo', FD, '...')
    m = open(FD, 'ab')
    for paciente in v:
        pickle.dump(paciente, m)
    m.close()
    print('... hecho')
    print()

def leer():

    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return
    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')
    print('Contenido del archivo', FD, '...')
    while m.tell() < tbm:
        pac = pickle.load(m)
        print(pac)
    m.close()
    print()



def test():

    global FD
    FD = "peaje75.txt"
    op = 1
    v=[]
    if op == 1:
        crear_archivo()

    elif op ==2:
        v=cargar_datos()
        crear(v)
        leer()
        #mostrar_archivo(v)





if __name__  == '__main__':
    test()

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

import pickle
import os.path
import Clase_ticket


def validar_numero(inf):
    min = inf

    while min <= inf and len(str(min)) <= 10:
        min = int(input("Ingrese numero de Ticket  mayor a cero!!:"))
    return min


def validate_type(mn=0, mx=2):
    print()
    vehiculo = int(input("Ingrese un dígito entre 0 y 2 que indica el tipo de vehículo (0: motocicleta, 1: automóvil, 2: camión)"))
    while vehiculo < mn or vehiculo > mx:
        vehiculo = int(input("No olvide que el vehículo DEBE ser entre 0 y 2"))
    return vehiculo


def validate_type_pago(mn=1, mx=2):
    print()
    pago = int(input("Ingrese un dígito 1 o 2 que indica la forma de pago (1: manual, 2 telepeaje)."))
    while pago< mn or pago > mx:
        pago = int(input("No olvide que el pago DEBE ser entre (1: manual, 2 telepeaje)"))
    return pago


def validate_type_cabina(mn=0, mx=4):
    print()
    cabina = int(input("Ingrese un dígito entre 0 y 4 que indica el país donde está la cabina que hizo el cobro (0: Argentina - 1: Bolivia - 2: Brasil - 3: Paraguay - 4: Uruguay).  "))
    while cabina < mn or cabina > mx:
        cabina = int(input("No olvide que la cabina DEBE ser un numero entre (0: Argentina - 1: Bolivia - 2: Brasil - 3: Paraguay - 4: Uruguay)"))
    return cabina


def validar_patente():
    print()
    patente1 = input("Ingrese patente: ").upper()

    while patente1.isalnum()==False:
        patente1 = input("Solo caracteres alfanuméricos!!").upper()
    """
    while len(patente1) > 7:
        patente1=input("ingrese patente de hasta 7 caracteres: ")
   print(len(patente1))
    """
    if len(patente1) < 7:
        total_espacios = 7-len(patente1)
        patente1 = total_espacios*" "+str(patente1)

    return str(patente1)


def validar_km(inf):
    km = inf

    while km <= inf:
        print()
        km = int(input("Ingrese cantidad de km recorridos mayor a cero:"))
        if km <= inf:
            print("Recuerde que la cantidad de km debe ser positiva")
    return km


def crear_archivo():
    global FD
    print('Grabando todos los datos en el archivo ...')
    m = open("peajes-tp4.csv", 'r')
    peaje= m.read()


    m.close()

    oficial = open('peaje75.txt',"wb")
    pickle.dump(peaje,oficial)

    print('... hecho')
    print()

def cargar_datos():
    v = []
    ticket = int(validar_numero(0))
    patente = validar_patente()
    vehiculo = validate_type()
    forma_de_pago = validate_type_pago()
    cabina = validate_type_cabina()
    km = int(validar_km(0))

    v.append(Clase_ticket.Ticket(ticket, patente, vehiculo, forma_de_pago, cabina, km))

    return v

def crear(v):
    global FD
    if len(v) == 0:
        print('No hay datos cargados...')
        print()
        return
    print('Grabando todos los datos en el archivo', FD, '...')
    if os.path.exists(FD):
        m = open(FD, 'ab')
        for paciente in v:
            pickle.dump(str(paciente), m)
            m.close()
    if not os.path.exists(FD):
        m=open(FD,'wb')
        for paciente in v:
            pickle.dump(str(paciente), m)
            m.close()

    print('... hecho')
    print()

def patente(patente):
    if (patente[0:2].isalpha() and patente[2:5].isdigit() and patente[5:].isalpha()):

        p = "Argentina"

        return p

    elif patente[0:2].isalpha() and patente[2:].isdigit():

        p = "Bolivia"
        return p

    elif patente[0:4].isalpha() and patente[4:].isdigit():

        p = "Paraguay"
        return p
    elif patente[0:3].isalpha() and patente[3:].isdigit():

        p = "Uruguay"
        return p
    elif patente[0:3].isalpha() and patente[3].isdigit() and patente[4].isalpha() and patente[5:].isdigit():

        p = "Brasil"
        return p

    elif patente[0] == " " and patente[1:5].isalpha() and patente[5:].isdigit():
        p = "Chile"
        return p
    else:
        p = "Otros"
        return p


def leer(): #punto3
    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return

    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')
    primera_lineea = True
    while m.tell() < tbm:

        pac = pickle.load(m)

        for linea in pac.split("\n"):
            if primera_lineea:
                primera_lineea = False
                continue
            elemento = linea.split(",")
            print(linea+" "+str(patente(elemento[1])))

    m.close()
    print()

def buscar_patente():
    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return

    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')
    primera_lineea = True
    patente = input("Ingrese patente a buscar").upper()
    while m.tell() < tbm:

        pac = pickle.load(m)

        for linea in pac.split("\n"):
            if primera_lineea:
                primera_lineea = False
                continue
            elemento = linea.split(",")
            if patente == elemento[1]:
                print(linea)

    m.close()
    print()


def test():
    global FD
    FD = "peaje75.txt"
    op =0
    v=[]
    while op !=10:
        op=int(input("ingrese opcion a realizar: "))
        if op == 1:
            print("esta seguro que desea crear un nuevo arreglo? 1:SI 2:NO")
            decision = int(input("ingrese opcion: "))
            if decision == 1:
                crear_archivo()

            else:
                continue

        elif op == 2:
            v = cargar_datos()
            crear(v)

            #mostrar_archivo(v)
        elif op ==3:
            leer()
        elif op ==4:
            buscar_patente()







if __name__  == '__main__':
    test()

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
import pickle
import os.path
import Clase_ticket


def validar_numero(inf):
    min = inf

    while min <= inf and len(str(min)) <= 10:
        min = int(input("Ingrese numero de Ticket  mayor a cero!!:"))
    return min


def validate_type(mn=0, mx=2):
    print()
    vehiculo = int(input("Ingrese un dígito entre 0 y 2 que indica el tipo de vehículo (0: motocicleta, 1: automóvil, 2: camión)"))
    while vehiculo < mn or vehiculo > mx:
        vehiculo = int(input("No olvide que el vehículo DEBE ser entre 0 y 2"))
    return vehiculo


def validate_type_pago(mn=1, mx=2):
    print()
    pago = int(input("Ingrese un dígito 1 o 2 que indica la forma de pago (1: manual, 2 telepeaje)."))
    while pago< mn or pago > mx:
        pago = int(input("No olvide que el pago DEBE ser entre (1: manual, 2 telepeaje)"))
    return pago


def validate_type_cabina(mn=0, mx=4):
    print()
    cabina = int(input("Ingrese un dígito entre 0 y 4 que indica el país donde está la cabina que hizo el cobro (0: Argentina - 1: Bolivia - 2: Brasil - 3: Paraguay - 4: Uruguay).  "))
    while cabina < mn or cabina > mx:
        cabina = int(input("No olvide que la cabina DEBE ser un numero entre (0: Argentina - 1: Bolivia - 2: Brasil - 3: Paraguay - 4: Uruguay)"))
    return cabina


def validar_patente():
    print()
    patente1 = input("Ingrese patente: ").upper()

    while patente1.isalnum()==False:
        patente1 = input("Solo caracteres alfanuméricos!!").upper()
    """
    while len(patente1) > 7:
        patente1=input("ingrese patente de hasta 7 caracteres: ")
   print(len(patente1))
    """
    if len(patente1) < 7:
        total_espacios = 7-len(patente1)
        patente1 = total_espacios*" "+str(patente1)

    return str(patente1)


def validar_km(inf):
    km = inf

    while km <= inf:
        print()
        km = int(input("Ingrese cantidad de km recorridos mayor a cero:"))
        if km <= inf:
            print("Recuerde que la cantidad de km debe ser positiva")
    return km


def crear_archivo():
    global FD
    print('Grabando todos los datos en el archivo ...')
    m = open("peajes-tp4.csv", 'r')
    peaje= m.read()


    m.close()

    oficial = open('peajes75.bin', "wb")
    pickle.dump(peaje,oficial)

    print('... hecho')
    print()

def cargar_datos():
    v = []
    ticket = int(validar_numero(0))
    patente = validar_patente()
    vehiculo = validate_type()
    forma_de_pago = validate_type_pago()
    cabina = validate_type_cabina()
    km = int(validar_km(0))

    v.append(Clase_ticket.Ticket(ticket, patente, vehiculo, forma_de_pago, cabina, km))

    return v

def crear(v):
    global FD
    if len(v) == 0:
        print('No hay datos cargados...')
        print()
        return
    print('Grabando todos los datos en el archivo', FD, '...')
    if os.path.exists(FD):
        m = open(FD, 'ab')
        for paciente in v:
            pickle.dump(str(paciente), m)
            m.close()
    if not os.path.exists(FD):
        m=open(FD,'wb')
        for paciente in v:
            pickle.dump(str(paciente), m)
            m.close()

    print('... hecho')
    print()

def patente(patente):
    if len(patente)==7:
        if (patente[0:2].isalpha() and patente[2:5].isdigit() and patente[5:].isalpha()):

            p = "Argentina"

            return p

        elif patente[0:2].isalpha() and patente[2:].isdigit():

            p = "Bolivia"
            return p

        elif patente[0:4].isalpha() and patente[4:].isdigit():

            p = "Paraguay"
            return p
        elif patente[0:3].isalpha() and patente[3:].isdigit():

            p = "Uruguay"
            return p
        elif patente[0:3].isalpha() and patente[3].isdigit() and patente[4].isalpha() and patente[5:].isdigit():

            p = "Brasil"
            return p
        else:
            p = "Otros"
            return p

    elif len(patente) < 7:
        if patente[0:4].isalpha() and patente[4:].isdigit():
            p = "Chile"
            return p
        else:
            p = "Otros"
            return p

    elif len(patente) > 7:
        p = "Otros"
        return p


def leer(): #punto3
    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return

    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')
    primera_lineea = True
    while m.tell() < tbm:

        pac = pickle.load(m)

        for linea in pac.split("\n"):
            if primera_lineea:
                primera_lineea = False
                continue
            elemento = linea.split(",")
            print(linea+" "+str(patente(elemento[1])))

    m.close()
    print()

def buscar_patente():
    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return

    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')
    primera_lineea = True
    patente = input("Ingrese patente a buscar").upper()
    cont=0
    while m.tell() < tbm:

        pac = pickle.load(m)

        for linea in pac.split("\n"):
            if primera_lineea:
                primera_lineea = False
                continue
            elemento = linea.split(",")
            if patente == elemento[1]:
                print(linea)
                cont+=1
    print(cont)

    m.close()
    print()

def buscar_ticket():
    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return

    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')
    primera_lineea = True
    c = input("Ingrese ticket a buscar")

    while m.tell() < tbm:

        pac = pickle.load(m)

        for linea in pac.split("\n"):
            if primera_lineea:
                primera_lineea = False
                continue
            elemento = linea.split(",")
            if c == elemento[0]:
                print("SI SE ENCONTRARON LOS DATOS")
                print(linea)
                return

    m.close()
    print()



def test():
    global FD
    FD = "peajes75.bin"
    op =0
    v=[]
    while op !=10:
        op=int(input("ingrese opcion a realizar: "))
        if op == 1:
            print("esta seguro que desea crear un nuevo arreglo? 1:SI 2:NO")
            decision = int(input("ingrese opcion: "))
            if decision == 1:
                crear_archivo()

            else:
                continue

        elif op == 2:
            v = cargar_datos()
            crear(v)
            #mostrar_archivo(v)

        elif op == 3:
            leer()

        elif op == 4:
            buscar_patente()

        elif op ==5:
            buscar_ticket()



if __name__  == '__main__':
    test()

++++++++++++++++++++++++++++++++++++++++++++++++++++
import pickle
import os.path
import Clase_ticket


def validar_numero(inf):
    min = inf

    while min <= inf and len(str(min)) <= 10:
        min = int(input("Ingrese numero de Ticket  mayor a cero!!:"))
    return min


def validate_type(mn=0, mx=2):
    print()
    vehiculo = int(input("Ingrese un dígito entre 0 y 2 que indica el tipo de vehículo (0: motocicleta, 1: automóvil, 2: camión)"))
    while vehiculo < mn or vehiculo > mx:
        vehiculo = int(input("No olvide que el vehículo DEBE ser entre 0 y 2"))
    return vehiculo


def validate_type_pago(mn=1, mx=2):
    print()
    pago = int(input("Ingrese un dígito 1 o 2 que indica la forma de pago (1: manual, 2 telepeaje)."))
    while pago< mn or pago > mx:
        pago = int(input("No olvide que el pago DEBE ser entre (1: manual, 2 telepeaje)"))
    return pago


def validate_type_cabina(mn=0, mx=4):
    print()
    cabina = int(input("Ingrese un dígito entre 0 y 4 que indica el país donde está la cabina que hizo el cobro (0: Argentina - 1: Bolivia - 2: Brasil - 3: Paraguay - 4: Uruguay).  "))
    while cabina < mn or cabina > mx:
        cabina = int(input("No olvide que la cabina DEBE ser un numero entre (0: Argentina - 1: Bolivia - 2: Brasil - 3: Paraguay - 4: Uruguay)"))
    return cabina


def validar_patente():
    print()
    patente1 = input("Ingrese patente: ").upper()

    while patente1.isalnum()==False:
        patente1 = input("Solo caracteres alfanuméricos!!").upper()
    """
    while len(patente1) > 7:
        patente1=input("ingrese patente de hasta 7 caracteres: ")
   print(len(patente1))
    """
    if len(patente1) < 7:
        total_espacios = 7-len(patente1)
        patente1 = total_espacios*" "+str(patente1)

    return str(patente1)


def validar_km(inf):
    km = inf

    while km <= inf:
        print()
        km = int(input("Ingrese cantidad de km recorridos mayor a cero:"))
        if km <= inf:
            print("Recuerde que la cantidad de km debe ser positiva")
    return km


def crear_archivo():
    global FD
    print('Grabando todos los datos en el archivo ...')
    m = open("peajes-tp4.csv", 'r')
    peaje= m.read()


    m.close()

    oficial = open('peajes75.bin', "wb")
    pickle.dump(peaje,oficial)

    print('... hecho')
    print()

def cargar_datos():
    v = []
    ticket = int(validar_numero(0))
    patente = validar_patente()
    vehiculo = validate_type()
    forma_de_pago = validate_type_pago()
    cabina = validate_type_cabina()
    km = int(validar_km(0))

    v.append(Clase_ticket.Ticket(ticket, patente, vehiculo, forma_de_pago, cabina, km))

    return v

def crear(v):
    global FD
    if len(v) == 0:
        print('No hay datos cargados...')
        print()
        return
    print('Grabando todos los datos en el archivo', FD, '...')
    if os.path.exists(FD):
        m = open(FD, 'ab')
        for paciente in v:
            pickle.dump(str(paciente), m)
            m.close()
    if not os.path.exists(FD):
        m=open(FD,'wb')
        for paciente in v:
            pickle.dump(str(paciente), m)
            m.close()

    print('... hecho')
    print()

def patente(patente):
    if patente[0:7].isalpha():
        p=""
        return p


    if len(patente)==7:
        if (patente[0:2].isalpha() and patente[2:5].isdigit() and patente[5:].isalpha()):

            p = "Argentina"

            return p

        elif patente[0:2].isalpha() and patente[2:].isdigit():

            p = "Bolivia"
            return p

        elif patente[0:4].isalpha() and patente[4:].isdigit():

            p = "Paraguay"
            return p
        elif patente[0:3].isalpha() and patente[3:].isdigit():

            p = "Uruguay"
            return p
        elif patente[0:3].isalpha() and patente[3].isdigit() and patente[4].isalpha() and patente[5:].isdigit():

            p = "Brasil"
            return p
        else:
            p = "Otros"
            return p

    elif len(patente) < 7:
        if patente[0:4].isalpha() and patente[4:].isdigit():
            p = "Chile"
            return p
        else:
            p = "Otros"
            return p

    elif len(patente) > 7:
        p = "Otros"
        return p


def leer(): #punto3
    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return

    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')
    primera_lineea = True
    while m.tell() < tbm:

        pac = pickle.load(m)

        for linea in pac.split("\n"):
            if primera_lineea:
                print(linea)
                primera_lineea = False
                continue
            elemento = linea.split(",")
            print(linea+" "+str(patente(elemento[1])))

    m.close()
    print()

def buscar_patente():
    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return

    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')
    primera_lineea = True
    patente = input("Ingrese patente a buscar").upper()
    cont=0
    while m.tell() < tbm:

        pac = pickle.load(m)

        for linea in pac.split("\n"):
            if primera_lineea:
                primera_lineea = False
                continue
            elemento = linea.split(",")
            if patente == elemento[1]:
                print(linea)
                cont+=1
    print(cont)

    m.close()
    print()

def buscar_ticket():
    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return

    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')
    primera_lineea = True
    c = input("Ingrese ticket a buscar")

    while m.tell() < tbm:

        pac = pickle.load(m)

        for linea in pac.split("\n"):
            if primera_lineea:
                primera_lineea = False
                continue
            elemento = linea.split(",")
            if c == elemento[0]:
                print("SI SE ENCONTRARON LOS DATOS")
                print(linea)
                return

    m.close()
    print()

def conteo():
    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return
    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')
    primera_lineea = True


    while m.tell() < tbm:

        pac = pickle.load(m)

        for linea in pac.split("\n"):
            if primera_lineea:
                primera_lineea = False
                continue
            elemento = linea.split(",")
            cf, cc = 3, 5
            cant = [cc * [0] for f in range(cf)]

            f = int(elemento[2])
            c = int(elemento[4])
            cant[f][c] += 1

            for f in range(cf):
                for c in range(cc):
                    if cant[f][c] != 0:
                        print('Tipo', f, 'Idioma', c, 'Cantidad:', cant[f][c])

    m.close()
    print()





def test():
    global FD
    FD = "peajes75.bin"
    op =0
    v=[]
    while op !=10:
        op=int(input("ingrese opcion a realizar: "))
        if op == 1:
            print("esta seguro que desea crear un nuevo arreglo? 1:SI 2:NO")
            decision = int(input("ingrese opcion: "))
            if decision == 1:
                crear_archivo()

            else:
                continue

        elif op == 2:
            v = cargar_datos()
            crear(v)
            #mostrar_archivo(v)

        elif op == 3:
            leer()

        elif op == 4:
            buscar_patente()

        elif op ==5:
            buscar_ticket()

        elif op ==6:
            conteo()



if __name__  == '__main__':
    test()

+++++++++++++++++++++++++++++++++++++++
import pickle
import os.path
import Clase_ticket


def validar_numero(inf):
    min = inf

    while min <= inf and len(str(min)) <= 10:
        min = int(input("Ingrese numero de Ticket  mayor a cero!!:"))
    return min


def validate_type(mn=0, mx=2):
    print()
    vehiculo = int(input("Ingrese un dígito entre 0 y 2 que indica el tipo de vehículo (0: motocicleta, 1: automóvil, 2: camión)"))
    while vehiculo < mn or vehiculo > mx:
        vehiculo = int(input("No olvide que el vehículo DEBE ser entre 0 y 2"))
    return vehiculo


def validate_type_pago(mn=1, mx=2):
    print()
    pago = int(input("Ingrese un dígito 1 o 2 que indica la forma de pago (1: manual, 2 telepeaje)."))
    while pago< mn or pago > mx:
        pago = int(input("No olvide que el pago DEBE ser entre (1: manual, 2 telepeaje)"))
    return pago


def validate_type_cabina(mn=0, mx=4):
    print()
    cabina = int(input("Ingrese un dígito entre 0 y 4 que indica el país donde está la cabina que hizo el cobro (0: Argentina - 1: Bolivia - 2: Brasil - 3: Paraguay - 4: Uruguay).  "))
    while cabina < mn or cabina > mx:
        cabina = int(input("No olvide que la cabina DEBE ser un numero entre (0: Argentina - 1: Bolivia - 2: Brasil - 3: Paraguay - 4: Uruguay)"))
    return cabina


def validar_patente():
    print()
    patente1 = input("Ingrese patente: ").upper()

    while patente1.isalnum()==False:
        patente1 = input("Solo caracteres alfanuméricos!!").upper()
    """
    while len(patente1) > 7:
        patente1=input("ingrese patente de hasta 7 caracteres: ")
   print(len(patente1))
    """
    if len(patente1) < 7:
        total_espacios = 7-len(patente1)
        patente1 = total_espacios*" "+str(patente1)

    return str(patente1)


def validar_km(inf):
    km = inf

    while km <= inf:
        print()
        km = int(input("Ingrese cantidad de km recorridos mayor a cero:"))
        if km <= inf:
            print("Recuerde que la cantidad de km debe ser positiva")
    return km


def crear_archivo():


    with open('peajes75.bin', 'wb') as f:
        cont_lineas = 0
        arch = "peajes-tp4.csv"
        if not os.path.exists(arch):
            print("Archivos perdidos, por favor reingrese el fichero en la carpeta del proyecto")
            return

        m = open(arch, mode="rt", encoding="utf8")
        for linea in m:
            if cont_lineas < 2:

                cont_lineas += 1

            else:
                if linea[-1] == "\n":
                    linea = linea[:-1]

                cadena = linea.split(",")

                ticket = cadena[0]
                patente = cadena[1]
                vehiculo = cadena[2]
                forma_de_pago = cadena[3]
                cabina = cadena[4]
                km = cadena[5]

                Ticket = Clase_ticket.Ticket(ticket,patente, vehiculo,forma_de_pago,cabina,km)
                pickle.dump(Ticket, f)



def cargar_datos():
    with open('peajes75.bin', 'ab') as f:
        ticket = (validar_numero(0))
        patente = validar_patente()
        vehiculo = validate_type()
        forma_de_pago = validate_type_pago()
        cabina = validate_type_cabina()
        km = (validar_km(0))

        Ticket = Clase_ticket.Ticket(ticket, patente, vehiculo, forma_de_pago, cabina, km)
        pickle.dump(Ticket, f)


def crear():
    contador=0
    if not os.path.exists("peajes75.bin"):
        print("No existe el archivo.")
        return
    with open('peajes75.bin', 'rb') as f:
        while True:
            try:
                    
                    ticket = pickle.load(f)
                    print(str(ticket)+" "+patente(ticket.patente))

            except EOFError:
                # Salir del bucle si se ha alcanzado el final del archivo
                break


def patente(patente):
    if patente[0:7].isalpha():
        p = ""
        return p

    if len(patente) == 7:
        if (patente[0:2].isalpha() and patente[2:5].isdigit() and patente[5:].isalpha()):

            p = "Argentina"

            return p

        elif patente[0:2].isalpha() and patente[2:].isdigit():

            p = "Bolivia"
            return p

        elif patente[0:4].isalpha() and patente[4:].isdigit():

            p = "Paraguay"
            return p
        elif patente[0:3].isalpha() and patente[3:].isdigit():

            p = "Uruguay"
            return p
        elif patente[0:3].isalpha() and patente[3].isdigit() and patente[4].isalpha() and patente[5:].isdigit():

            p = "Brasil"
            return p
        else:
            p = "Otros"
            return p

    elif len(patente) < 7:
        if patente[0:4].isalpha() and patente[4:].isdigit():
            p = "Chile"
            return p
        else:
            p = "Otros"
            return p

    elif len(patente) > 7:
        p = "Otros"
        return p


def buscar_patente():

    if not os.path.exists("peajes75.bin"):
        print('El archivo', FD, 'no existe...')
        print()
        return

    tbm = os.path.getsize(FD)
    m = open("peajes75.bin", 'rb')

    print('Contenido del archivo', FD, '...')

    patente = input("Ingrese patente a buscar").upper()
    cont=0
    while m.tell() < tbm:

        ticket = pickle.load(m)
        if ticket.patente == patente:
            print(ticket)


    print(cont)

    m.close()
    print()


def buscar_ticket():

    if not os.path.exists("peajes75.bin"):
        print('El archivo no existe...')
        print()
        return

    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')
    primera_lineea = True
    c = input("Ingrese ticket a buscar")

    while m.tell() < tbm:

        pac = pickle.load(m)

        for linea in pac.split("\n"):
            if primera_lineea:
                primera_lineea = False
                continue
            elemento = linea.split(",")
            if c == elemento[0]:
                print("SI SE ENCONTRARON LOS DATOS")
                print(linea)
                return

    m.close()
    print()


def conteo():
    global FD
    if not os.path.exists(FD):
        print('El archivo', FD, 'no existe...')
        print()
        return
    tbm = os.path.getsize(FD)
    m = open(FD, 'rb')

    print('Contenido del archivo', FD, '...')

    while m.tell() < tbm:

        pac = pickle.load(m)
        cont = 0
        cf, cc = 3, 5
        cant = [cc * [0] for f in range(cf)]
        for linea in pac.split("\n"):
            if cont < 2:
                cont += 1
                continue

            elemento = linea.split(",")

            f = int(elemento[2])
            c = int(elemento[4])
            cant[f][c] += 1

        for f in range(cf):
            for c in range(cc):
                if cant[f][c] != 0:
                    print('Vehiculo', f, 'Pais', c, 'Cantidad:', cant[f][c])

    m.close()
    print()


def test():
    global FD
    FD = "peajes75.bin"
    op =0
    v = []
    while op != 10:
        op=int(input("ingrese opcion a realizar: "))
        if op == 1:
            print("esta seguro que desea crear un nuevo arreglo? 1:SI 2:NO")
            decision = int(input("ingrese opcion: "))
            if decision == 1:
                crear_archivo()

            else:
                continue

        elif op == 2:
            cargar_datos()
            #mostrar_archivo(v)

        elif op == 3:
            crear()

        elif op == 4:
            buscar_patente()

        elif op == 5:
            buscar_ticket()

        elif op == 6:
            conteo()

        elif op == 7:
            pass




if __name__  == '__main__':
    test()


